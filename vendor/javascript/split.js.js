var e="undefined"!==typeof window?window:null;var t=null===e;var r=t?void 0:e.document;var n="addEventListener";var i="removeEventListener";var a="getBoundingClientRect";var s="_a";var o="_b";var u="_c";var l="horizontal";var NOOP=function(){return false};var c=t?"calc":["","-webkit-","-moz-","-o-"].filter((function(e){var t=r.createElement("div");t.style.cssText="width:"+e+"calc(9px)";return!!t.style.length})).shift()+"calc";var isString=function(e){return"string"===typeof e||e instanceof String};var elementOrSelector=function(e){if(isString(e)){var t=r.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e};var getOption=function(e,t,r){var n=e[t];return void 0!==n?n:r};var getGutterSize=function(e,t,r,n){if(t){if("end"===n)return 0;if("center"===n)return e/2}else if(r){if("start"===n)return 0;if("center"===n)return e/2}return e};var defaultGutterFn=function(e,t){var n=r.createElement("div");n.className="gutter gutter-"+t;return n};var defaultElementStyleFn=function(e,t,r){var n={};isString(t)?n[e]=t:n[e]=c+"("+t+"% - "+r+"px)";return n};var defaultGutterStyleFn=function(e,t){var r;return r={},r[e]=t+"px",r};var Split=function(c,v){void 0===v&&(v={});if(t)return{};var f=c;var g;var m;var d;var h;var z;var p;Array.from&&(f=Array.from(f));var S=elementOrSelector(f[0]);var y=S.parentNode;var b=getComputedStyle?getComputedStyle(y):null;var E=b?b.flexDirection:null;var w=getOption(v,"sizes")||f.map((function(){return 100/f.length}));var M=getOption(v,"minSize",100);var x=Array.isArray(M)?M:f.map((function(){return M}));var O=getOption(v,"maxSize",Infinity);var D=Array.isArray(O)?O:f.map((function(){return O}));var j=getOption(v,"expandToMin",false);var A=getOption(v,"gutterSize",10);var T=getOption(v,"gutterAlign","center");var k=getOption(v,"snapOffset",30);var U=Array.isArray(k)?k:f.map((function(){return k}));var C=getOption(v,"dragInterval",1);var F=getOption(v,"direction",l);var B=getOption(v,"cursor",F===l?"col-resize":"row-resize");var L=getOption(v,"gutter",defaultGutterFn);var P=getOption(v,"elementStyle",defaultElementStyleFn);var _=getOption(v,"gutterStyle",defaultGutterStyleFn);if(F===l){g="width";m="clientX";d="left";h="right";z="clientWidth"}else if("vertical"===F){g="height";m="clientY";d="top";h="bottom";z="clientHeight"}function setElementSize(e,t,r,n){var i=P(g,t,r,n);Object.keys(i).forEach((function(t){e.style[t]=i[t]}))}function setGutterSize(e,t,r){var n=_(g,t,r);Object.keys(n).forEach((function(t){e.style[t]=n[t]}))}function getSizes(){return p.map((function(e){return e.size}))}function getMousePosition(e){return"touches"in e?e.touches[0][m]:e[m]}function adjust(e){var t=p[this.a];var r=p[this.b];var n=t.size+r.size;t.size=e/this.size*n;r.size=n-e/this.size*n;setElementSize(t.element,t.size,this[o],t.i);setElementSize(r.element,r.size,this[u],r.i)}function drag(e){var t;var r=p[this.a];var n=p[this.b];if(this.dragging){t=getMousePosition(e)-this.start+(this[o]-this.dragOffset);C>1&&(t=Math.round(t/C)*C);t<=r.minSize+r.snapOffset+this[o]?t=r.minSize+this[o]:t>=this.size-(n.minSize+n.snapOffset+this[u])&&(t=this.size-(n.minSize+this[u]));t>=r.maxSize-r.snapOffset+this[o]?t=r.maxSize+this[o]:t<=this.size-(n.maxSize-n.snapOffset+this[u])&&(t=this.size-(n.maxSize+this[u]));adjust.call(this,t);getOption(v,"onDrag",NOOP)(getSizes())}}function calculateSizes(){var e=p[this.a].element;var t=p[this.b].element;var r=e[a]();var n=t[a]();this.size=r[g]+n[g]+this[o]+this[u];this.start=r[d];this.end=r[h]}function innerSize(e){if(!getComputedStyle)return null;var t=getComputedStyle(e);if(!t)return null;var r=e[z];if(0===r)return null;r-=F===l?parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):parseFloat(t.paddingTop)+parseFloat(t.paddingBottom);return r}function trimToMin(e){var t=innerSize(y);if(null===t)return e;if(x.reduce((function(e,t){return e+t}),0)>t)return e;var r=0;var n=[];var i=e.map((function(i,a){var s=t*i/100;var o=getGutterSize(A,0===a,a===e.length-1,T);var u=x[a]+o;if(s<u){r+=u-s;n.push(0);return u}n.push(s-u);return s}));return 0===r?e:i.map((function(e,i){var a=e;if(r>0&&n[i]-r>0){var s=Math.min(r,n[i]-r);r-=s;a=e-s}return a/t*100}))}function stopDragging(){var t=this;var n=p[t.a].element;var a=p[t.b].element;t.dragging&&getOption(v,"onDragEnd",NOOP)(getSizes());t.dragging=false;e[i]("mouseup",t.stop);e[i]("touchend",t.stop);e[i]("touchcancel",t.stop);e[i]("mousemove",t.move);e[i]("touchmove",t.move);t.stop=null;t.move=null;n[i]("selectstart",NOOP);n[i]("dragstart",NOOP);a[i]("selectstart",NOOP);a[i]("dragstart",NOOP);n.style.userSelect="";n.style.webkitUserSelect="";n.style.MozUserSelect="";n.style.pointerEvents="";a.style.userSelect="";a.style.webkitUserSelect="";a.style.MozUserSelect="";a.style.pointerEvents="";t.gutter.style.cursor="";t.parent.style.cursor="";r.body.style.cursor=""}function startDragging(t){if(!("button"in t)||0===t.button){var i=this;var a=p[i.a].element;var s=p[i.b].element;i.dragging||getOption(v,"onDragStart",NOOP)(getSizes());t.preventDefault();i.dragging=true;i.move=drag.bind(i);i.stop=stopDragging.bind(i);e[n]("mouseup",i.stop);e[n]("touchend",i.stop);e[n]("touchcancel",i.stop);e[n]("mousemove",i.move);e[n]("touchmove",i.move);a[n]("selectstart",NOOP);a[n]("dragstart",NOOP);s[n]("selectstart",NOOP);s[n]("dragstart",NOOP);a.style.userSelect="none";a.style.webkitUserSelect="none";a.style.MozUserSelect="none";a.style.pointerEvents="none";s.style.userSelect="none";s.style.webkitUserSelect="none";s.style.MozUserSelect="none";s.style.pointerEvents="none";i.gutter.style.cursor=B;i.parent.style.cursor=B;r.body.style.cursor=B;calculateSizes.call(i);i.dragOffset=getMousePosition(t)-i.end}}w=trimToMin(w);var G=[];p=f.map((function(e,t){var r={element:elementOrSelector(e),size:w[t],minSize:x[t],maxSize:D[t],snapOffset:U[t],i:t};var i;if(t>0){i={a:t-1,b:t,dragging:false,direction:F,parent:y};i[o]=getGutterSize(A,t-1===0,false,T);i[u]=getGutterSize(A,false,t===f.length-1,T);if("row-reverse"===E||"column-reverse"===E){var a=i.a;i.a=i.b;i.b=a}}if(t>0){var l=L(t,F,r.element);setGutterSize(l,A,t);i[s]=startDragging.bind(i);l[n]("mousedown",i[s]);l[n]("touchstart",i[s]);y.insertBefore(l,r.element);i.gutter=l}setElementSize(r.element,r.size,getGutterSize(A,0===t,t===f.length-1,T),t);t>0&&G.push(i);return r}));function adjustToMin(e){var t=e.i===G.length;var r=t?G[e.i-1]:G[e.i];calculateSizes.call(r);var n=t?r.size-e.minSize-r[u]:e.minSize+r[o];adjust.call(r,n)}p.forEach((function(e){var t=e.element[a]()[g];t<e.minSize&&(j?adjustToMin(e):e.minSize=t)}));function setSizes(e){var t=trimToMin(e);t.forEach((function(e,r){if(r>0){var n=G[r-1];var i=p[n.a];var a=p[n.b];i.size=t[r-1];a.size=e;setElementSize(i.element,i.size,n[o],i.i);setElementSize(a.element,a.size,n[u],a.i)}}))}function destroy(e,t){G.forEach((function(r){if(true!==t)r.parent.removeChild(r.gutter);else{r.gutter[i]("mousedown",r[s]);r.gutter[i]("touchstart",r[s])}if(true!==e){var n=P(g,r.a.size,r[o]);Object.keys(n).forEach((function(e){p[r.a].element.style[e]="";p[r.b].element.style[e]=""}))}}))}return{setSizes:setSizes,getSizes:getSizes,collapse:function collapse(e){adjustToMin(p[e])},destroy:destroy,parent:y,pairs:G}};export{Split as default};

